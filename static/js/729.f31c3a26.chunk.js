"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[729],{132:(e,s,l)=>{l.d(s,{A:()=>d});var o=l(7950),a=l(4117),n=l(8973),t=l(5649),r=l(7620),i=l(579);const d=function(e){let{about:s,onConfirm:l,onClose:d,moreDetails:c=!0,children:m}=e;const{t:u}=(0,a.Bd)(),f=(0,t.j)((()=>{null===d||void 0===d||d()}));return(0,o.createPortal)((0,i.jsx)("div",{className:"fixed inset-0 flex justify-center items-center z-50 backdrop-brightness-75",children:(0,i.jsxs)("div",{className:"bg-white shadow-lg rounded max-w-5xl mx-auto p-4 overflow-auto",ref:f,children:[(0,i.jsx)("div",{className:"w-fit ml-auto text-2xl hover:text-red-600 cursor-pointer",onClick:()=>null===d||void 0===d?void 0:d(),children:(0,i.jsx)(n.PXF,{})}),(0,i.jsxs)("div",{className:"flex justify-center gap-5 flex-col p-4 max-w-[80dvh] max-h-[80dvh] object-cover",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"".concat(u("messages.confirmQuestion1")," ").concat(s," ").concat(c?u("messages.confirmQuestion2"):"")}),m||null,(0,i.jsxs)("div",{className:"flex items-center justify-between p-1",children:[(0,i.jsx)(r.A,{title:u("messages.yes"),type:"danger",handleClick:()=>null===l||void 0===l?void 0:l(),classes:"w-[49%] font-semibold text-lg"}),(0,i.jsx)(r.A,{title:u("messages.no"),handleClick:()=>null===d||void 0===d?void 0:d(),classes:"w-[49%] font-semibold text-lg"})]})]})]})}),document.body)}},7620:(e,s,l)=>{l.d(s,{A:()=>a});var o=l(579);const a=function(e){let{type:s="primary",title:l,dis:a,classes:n,handleClick:t}=e,r="";if("danger"===s)r="bg-red-500 hover:bg-red-600";else r="bg-[var(--primary-color-900)] hover:bg-[var(--primary-color-1100)]";return(0,o.jsx)("button",{className:"text-slate-50 border-none outline-none rounded-lg p-2 transition-colors disabled:cursor-not-allowed ".concat(r," ").concat(n),onClick:e=>null===t||void 0===t?void 0:t(e),disabled:a,children:l})}},729:(e,s,l)=>{l.r(s),l.d(s,{default:()=>N});var o=l(5043),a=l(4117),n=l(3003),t=l(3401),r=l(1552),i=l(8529),d=l(132),c=l(7620),m=l(579);const u=function(e){let{label:s,type:l,id:o,name:a,placeholder:n,val:t,setVal:r}=e;return(0,m.jsxs)("div",{className:"flex flex-col items-center gap-2 w-full sm:flex-row",children:[(0,m.jsx)("label",{htmlFor:o,className:"text-[1rem] font-medium basis-[100%] sm:basis-[25%]",children:s}),(0,m.jsx)("input",{id:o,name:a,type:l,value:t,onChange:e=>null===r||void 0===r?void 0:r(e.target.value),placeholder:n,className:"block p-2 border-[1px] border-[var(--primary-color-900)] rounded-lg outline-none transition-all basis-[100%] sm:basis-[75%]"})]})};const f=function(e){let{children:s,title:l="",classes:o=""}=e;return(0,m.jsxs)("div",{className:"flex justify-center items-center flex-col rounded-lg bg-slate-100 p-3 space-y-4",children:[""!==l?(0,m.jsx)("h1",{className:"text-xl font-semibold sm:text-3xl",children:l}):null,(0,m.jsx)("div",{className:"flex ".concat(o),children:s})]})};const g=function(e){let{isLoading:s,setIsLoading:l}=e;const{t:g}=(0,a.Bd)(),x=(0,n.d4)((e=>{var s;return null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.user})),p=(0,n.wA)(),[h,w]=(0,o.useState)(""),[v,j]=(0,o.useState)("");return(0,m.jsxs)(m.Fragment,{children:[""!==v?(0,m.jsx)(d.A,{about:v,onClose:()=>{j("")},onConfirm:async function(){j("");try{if(""===h)return void t.oR.warn("Email shouldn't be empty.");if(h===(null===x||void 0===x?void 0:x.email))return void t.oR.warn("The new email is the same as old one. Change it please");null===l||void 0===l||l(!0);const e=await fetch(r.A.updateEmail.url,{method:r.A.updateEmail.method,credentials:"include",body:JSON.stringify({newEmail:h.trim()}),headers:{"Content-Type":"application/json"}}),s=await e.json();s.success&&(t.oR.success(s.message),p((0,i.m5)(s.data)),w("")),s.error&&t.oR.error("Something went wrong")}catch(e){console.log(e.message)}finally{null===l||void 0===l||l(!1)}}}):null,(0,m.jsxs)(f,{title:g("forms.profile.changeEmailTitle"),classes:"self-start m-auto w-[90%] gap-2 flex-col sm:flex-row",children:[(0,m.jsx)(u,{val:h,setVal:e=>w(e),label:g("forms.profile.emailField.label"),type:"email",id:"email",name:"email",placeholder:g("forms.profile.emailField.placeholder")}),(0,m.jsx)(c.A,{title:g("forms.profile.confirm"),dis:s||!h,handleClick:()=>{j(g("forms.profile.emailField.confirmChange"))},classes:"w-[75%] mx-auto sm:w-fit sm:mx-0"})]})]})};var x=l(184),p=l(3156);const h=function(e){let{isLoading:s,setIsLoading:l}=e;const{t:c}=(0,a.Bd)(),u=(0,n.d4)((e=>{var s;return null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.user})),[g,h]=(0,o.useState)(null),[w,v]=(0,o.useState)(""),[j,b]=(0,o.useState)(!1),y=(0,n.wA)(),[N,C]=(0,o.useState)("");return(0,m.jsxs)(m.Fragment,{children:[""!==N?(0,m.jsx)(d.A,{about:N,onClose:()=>{C("")},onConfirm:async function(){if(C(""),g.size>5242880)t.oR.warn(c("messages.bigImage"));else try{const e=new FormData;e.append("profilePic",g),null===l||void 0===l||l(!0);const s=await fetch(r.A.updateImage.url,{method:r.A.updateImage.method,credentials:"include",body:e}),o=await s.json();o.success?(t.oR.success(c("messages.successUploadingImage")),y((0,i.m5)(o.data))):t.oR.error(c("messages.errUploadingImage"))}catch(e){console.log(e.message),t.oR.error(c("messages.errUploadingImage"))}finally{null===l||void 0===l||l(!1)}},children:(0,m.jsx)("div",{className:"flex justify-center items-center",children:w?(0,m.jsx)("img",{src:w,alt:"new profile",className:"w-[100px] h-[100px] rounded-full border-[1px] object-cover"}):(0,m.jsx)("div",{className:"w-[100px] h-[100px] rounded-full border-[1px] bg-gray-500 animate-pulse"})})}):null,(0,m.jsxs)(f,{classes:"items-center flex-col",children:[null!==u&&void 0!==u&&u.profilePic?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("img",{src:null===u||void 0===u?void 0:u.profilePic,className:"w-[100px] h-[100px] rounded-full object-cover border-[1px]",alt:null===u||void 0===u?void 0:u.name,style:j?{}:{display:"none"},onLoad:()=>b(!0)}),(0,m.jsx)("div",{style:j?{display:"none"}:{},className:"w-[100px] h-[100px] rounded-full border-[1px] bg-gray-500 animate-pulse"})]}):(0,m.jsx)(p.vJK,{className:"text-[100px]"}),(0,m.jsx)("form",{className:"relative",children:(0,m.jsxs)("label",{children:[(0,m.jsx)("div",{className:"text-xs bg-opacity-80 bg-primary-900 p-2 cursor-pointer text-center absolute bottom-[-10px] right-[-4rem] w-content rounded-full",children:(0,m.jsx)(x.F7,{className:"fill-white text-[1.2rem]"})}),(0,m.jsx)("input",{disabled:s,type:"file",className:"hidden",onChange:async function(e){const s=e.target.files[0];h(s);const l=new FileReader;l.onload=function(e){const s=e.target.result;v(s)},l.readAsDataURL(s),C(c("forms.profile.imageField.confirmChange"))}})]})}),(0,m.jsx)("h2",{className:"text-2xl font-semibold",children:null===u||void 0===u?void 0:u.name})]})]})};const w=function(e){let{isLoading:s,setIsLoading:l}=e;const{t:g}=(0,a.Bd)(),x=(0,n.d4)((e=>{var s;return null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.user})),[p,h]=(0,o.useState)(""),w=(0,n.wA)(),[v,j]=(0,o.useState)("");return(0,m.jsxs)(m.Fragment,{children:[""!==v?(0,m.jsx)(d.A,{about:v,onClose:()=>{j("")},onConfirm:async function(){j("");try{if(""===p)return void t.oR.warn(g("messages.errUsernameReq"));if(/\W+/g.test(p))return void t.oR.warn(g("messages.errSpecialNameChars"));if(p.length>50)return void t.oR.warn(g("messages.errUsernameLong"));if(p===(null===x||void 0===x?void 0:x.name))return void t.oR.warn(g("messages.errUsernameSame"));null===l||void 0===l||l(!0);const e=await fetch(r.A.updateName.url,{method:r.A.updateName.method,body:JSON.stringify({newName:p.trim()}),credentials:"include",headers:{"Content-Type":"application/json"}}),s=await e.json();s.success&&(t.oR.success(s.message),w((0,i.m5)(s.data)),h("")),s.error&&t.oR.error(g("messages.errUnkown"))}catch(e){console.log(e.message)}finally{null===l||void 0===l||l(!1)}}}):null,(0,m.jsxs)(f,{title:g("forms.profile.changeNameTitle"),classes:"self-start m-auto w-[90%] gap-2 flex-col sm:flex-row",children:[(0,m.jsx)(u,{val:p,setVal:e=>h(e),label:g("forms.profile.nameField.label"),type:"text",id:"userName",name:"userName",placeholder:g("forms.profile.nameField.placeholder")}),(0,m.jsx)(c.A,{title:g("forms.profile.confirm"),dis:s||!p,handleClick:()=>{j(g("forms.profile.nameField.confirmChange"))},classes:"w-[75%] mx-auto sm:w-fit sm:mx-0"})]})]})};const v=function(e){let{isLoading:s,setIsLoading:l}=e;const{t:n}=(0,a.Bd)(),[i,g]=(0,o.useState)(""),[x,p]=(0,o.useState)(""),[h,w]=(0,o.useState)("");return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"w-f"}),""!==h?(0,m.jsx)(d.A,{about:h,onClose:()=>{w("")},onConfirm:async function(){w("");try{if(""===i)return void t.oR.warn(n("messages.errOldPasswordReq"));if(""===x)return void t.oR.warn(n("messages.errNewPasswordReq"));null===l||void 0===l||l(!0);const e=await fetch(r.A.updatePassword.url,{method:r.A.updatePassword.method,body:JSON.stringify({oldPassword:i,newPassword:x.trim()}),credentials:"include",headers:{"Content-Type":"application/json"}}),s=await e.json();s.success&&(t.oR.success(s.message),g(""),p("")),s.error&&t.oR.error(n("messages.errUnkown"))}catch(e){console.log(e.message)}finally{null===l||void 0===l||l(!1)}}}):null,(0,m.jsxs)(f,{title:n("forms.profile.changePasswordTitle"),classes:"self-start m-auto flex-col w-[90%] space-y-3 ",children:[(0,m.jsx)(u,{val:i,setVal:e=>g(e),label:n("forms.profile.oldPasswordField.label"),type:"password",id:"userOldPassword",name:"userOldPassword",placeholder:n("forms.profile.oldPasswordField.placeholder")}),(0,m.jsx)(u,{val:x,setVal:e=>p(e),label:n("forms.profile.newPasswordField.label"),type:"password",id:"userNewPassword",name:"userNewPassword",placeholder:n("forms.profile.newPasswordField.placeholder")}),(0,m.jsx)(c.A,{title:n("forms.profile.confirm"),dis:s||!i||!x,handleClick:()=>{w(n("forms.profile.oldPasswordField.confirmChange"))},classes:"self-center w-[75%] sm:w-fit sm:self-end"})]})]})};var j=l(3216);const b=function(e){let{isLoading:s,setIsLoading:l}=e;const{t:u}=(0,a.Bd)(),[g,x]=(0,o.useState)(""),p=(0,n.wA)(),h=(0,j.Zp)();return(0,m.jsxs)(m.Fragment,{children:[""!==g?(0,m.jsx)(d.A,{about:g,onClose:()=>{x("")},onConfirm:async function(){x("");try{null===l||void 0===l||l(!0);const e=await fetch(r.A.logout_user.url,{method:r.A.logout_user.method,credentials:"include"}),s=await e.json();if(s.success&&(t.oR.success(u("messages.successLogout")),p((0,i.m5)(null)),h("/")),s.error)throw new Error("Something went wrong")}catch(e){console.log(e.message),t.oR.error("messages.errLogout")}finally{null===l||void 0===l||l(!1)}},moreDetails:!1}):null,(0,m.jsx)(f,{classes:"w-[25%]",children:(0,m.jsx)(c.A,{title:u("forms.profile.logoutBtn"),type:"danger",dis:s,handleClick:()=>{x(u("forms.profile.logoutBtn"))},classes:"w-[100%]"})})]})};var y=l(1591);const N=function(){const[e,s]=(0,o.useState)(!1),{t:l}=(0,a.Bd)();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(y.m,{children:[(0,m.jsx)("meta",{charSet:"utf-8"}),(0,m.jsx)("title",{children:l("SEO.titles.profile")})]}),(0,m.jsx)("div",{className:"py-6",children:(0,m.jsxs)("div",{className:"w-[95%] md:w-[75%] p-4 m-auto bg-slate-50 space-y-4",children:[(0,m.jsx)(h,{isLoading:e,setIsLoading:s}),(0,m.jsx)(w,{isLoading:e,setIsLoading:s}),(0,m.jsx)(g,{isLoading:e,setIsLoading:s}),(0,m.jsx)(v,{isLoading:e,setIsLoading:s}),(0,m.jsx)(b,{isLoading:e,setIsLoading:s})]})})]})}}}]);
//# sourceMappingURL=729.f31c3a26.chunk.js.map