"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[367],{6472:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(5043),r=s(579);const l=function(e){let{type:t,name:s,id:l,label:o,defaultValue:n,classes:i="",placeholder:c,required:d=!1,sterilizer:u,disabled:m}=e;const[g,h]=(0,a.useState)(n||"");function x(e){if(u){(null===u||void 0===u?void 0:u(e.target.value))&&h(e.target.value)}else h(e.target.value)}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{htmlFor:l,children:o}),"textarea"!==t?(0,r.jsx)("input",{disabled:m,type:t,id:l,placeholder:c,name:s,value:g,onChange:x,className:i,required:d}):(0,r.jsx)("textarea",{disabled:m,id:l,placeholder:c,name:s,value:g,onChange:x,className:i,required:d})]})}},3367:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var a=s(5043),r=s(4117),l=s(6720),o=s(2780),n=s(3401),i=s(1552),c=s(132),d=s(6633),u=s(4075),m=s(1839),g=s(6472),h=s(579);const x=function(e){var t,s,l;let{onSuccess:o,data:c}=e;const[d,u]=(0,a.useState)(!1),{t:x}=(0,r.Bd)();return(0,h.jsxs)("form",{className:"pt-6 flex flex-col gap-2",onSubmit:async function(e){try{c?await async function(e){try{e.preventDefault(),u(!0);const t=new FormData(e.target),s=[];t.entries().forEach((e=>{s.push({language:e[0].slice(12).toLowerCase(),text:e[1].trim()})}));const a=await fetch(i.A.updateCategory.url,{method:i.A.updateCategory.method,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({categoryId:c._id,categoryName:s})});if(!(await a.json()).success)throw new Error("Something went wrong");n.oR.success(x("messages.successUploadCategory"))}catch(t){console.log(t.message),n.oR.error(x("messages.errUploadCategory"))}finally{u(!1)}}(e):await async function(e){try{e.preventDefault(),u(!0);const t=new FormData(e.target),s=[];t.entries().forEach((e=>{s.push({language:e[0].slice(12).toLowerCase(),text:e[1]})}));const a=await fetch(i.A.uploadCategory.url,{method:i.A.uploadCategory.method,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({categoryName:s})}),r=await a.json();if(!r.success){if("Category already exists"===r.message)throw new Error("Category already exists");throw new Error("Something went wrong")}n.oR.success(x("messages.successUploadCategory"))}catch(t){console.log(t.message),"Category already exists"===t.message?n.oR.error(x("messages.errExistCategory")):n.oR.error(x("messages.errUploadCategory"))}finally{u(!1)}}(e),o()}catch(t){console.log(t.message)}},children:[(0,h.jsx)(g.A,{type:"text",name:"categoryNameEN",id:"categoryNameEN",label:x("forms.admin.categoryNameField.label"),placeholder:x("forms.admin.categoryNameField.placeholder"),classes:"p-2 bg-slate-100 border rounded disabled:cursor-not-allowed",disabled:d,defaultValue:null===c||void 0===c||null===(t=c.categoryName)||void 0===t?void 0:t.filter((e=>"en"===e.language))[0].text,sterilizer:e=>!!(0,m.yI)(e,x)&&(!(e.length>=100)||(n.oR.warn(x("messages.errCategoryNameLong")),!1))}),(0,h.jsx)(g.A,{type:"text",name:"categoryNameAR",id:"categoryNameAR",label:x("forms.admin.categoryNameFieldAR.label"),placeholder:x("forms.admin.categoryNameFieldAR.placeholder"),classes:"p-2 bg-slate-100 border rounded disabled:cursor-not-allowed",disabled:d,required:!0,defaultValue:null===c||void 0===c||null===(s=c.categoryName)||void 0===s?void 0:s.filter((e=>"ar"===e.language))[0].text,sterilizer:e=>!!(0,m.KN)(e,x)&&(!(e.length>=100)||(n.oR.warn(x("messages.errCategoryNameLong")),!1))}),(0,h.jsx)(g.A,{type:"text",name:"categoryNameFR",id:"categoryNameFR",label:x("forms.admin.categoryNameFieldFR.label"),placeholder:x("forms.admin.categoryNameFieldFR.placeholder"),classes:"p-2 bg-slate-100 border rounded  disabled:cursor-not-allowed",disabled:d,required:!0,defaultValue:null===c||void 0===c||null===(l=c.categoryName)||void 0===l?void 0:l.filter((e=>"fr"===e.language))[0].text,sterilizer:e=>!!(0,m.WR)(e,x)&&(!(e.length>=100)||(n.oR.warn(x("messages.errCategoryNameLong")),!1))}),(0,h.jsx)("button",{disabled:d,className:"bg-primary-900 hover:bg-primary-700 text-white px-6 py-2 w-full max-w-[150px] rounded-full hover:scale-110 transition-all mx-auto block mt-6 disabled:cursor-not-allowed",children:x(c?"forms.admin.updateCategory":"forms.admin.addCategoryBtn")})]})};var f=s(2748),y=s(4120);const b=function(){const[e,t]=(0,a.useState)(!1),[s,m]=(0,a.useState)(!1),[g,b]=(0,a.useState)(!1),[p,v]=(0,a.useState)(!0),[j,w]=(0,a.useState)(!1),[N,C]=(0,a.useState)([]),{t:A}=(0,r.Bd)(),R=(0,a.useRef)(null),F=(0,a.useRef)(null);async function k(){try{w(!1),v(!0);const e=await fetch(i.A.getAllCategories.url,{method:i.A.getAllCategories.method}),t=await e.json();if(!t.success)throw new Error("Something went wrong");C(t.data)}catch(j){w(!0),console.log(j.message)}finally{v(!1)}}return(0,a.useEffect)((()=>{k()}),[]),p?(0,h.jsx)("div",{className:"bg-white pb-4",children:(0,h.jsx)("div",{className:"flex items-center justify-center",children:(0,h.jsx)(o.IN,{strokeColor:"#c89329"})})}):j?(0,h.jsx)("div",{className:"p-4 w-full h-full",children:(0,h.jsx)(u.A,{refetchFunction:k,disable:p})}):(0,h.jsxs)("div",{className:"bg-white pb-4",children:[(0,h.jsx)(y.A,{buttonTitle:A("forms.admin.uploadBtnCategoryOpen"),title:A("forms.admin.uploadCategoryTitle"),hanldeClick:()=>t(!0)}),N.length?(0,h.jsxs)("table",{className:"w-full userTable",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{className:"bg-primary-700 text-white",children:[(0,h.jsx)("th",{children:A("tables.common.count")}),(0,h.jsx)("th",{children:A("tables.allCategories.englishName")}),(0,h.jsx)("th",{children:A("tables.allCategories.arabicName")}),(0,h.jsx)("th",{children:A("tables.allCategories.frenchName")}),(0,h.jsx)("th",{children:A("tables.common.action")})]})}),(0,h.jsx)("tbody",{children:N.map(((e,t)=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:t+1}),e.categoryName.map((e=>(0,h.jsx)("td",{children:e.text},e._id))),(0,h.jsxs)("td",{className:"py-2 flex justify-evenly",children:[(0,h.jsx)("button",{className:"bg-green-100 p-2 rounded-full cursor-pointer transition-colors hover:bg-green-500 hover:text-white",onClick:()=>{R.current=e,m(!0)},children:(0,h.jsx)(l.vAr,{})}),(0,h.jsx)("button",{className:"bg-red-100 p-2 rounded-full cursor-pointer transition-colors hover:bg-red-500 hover:text-white",onClick:()=>{F.current=e._id,b(!0)},children:(0,h.jsx)(l.b6i,{})})]})]},e._id)))})]}):(0,h.jsx)(d.A,{}),e&&(0,h.jsx)(f.A,{onClose:()=>t(!1),children:(0,h.jsx)(x,{onSuccess:()=>{t(!1),k()}})}),s&&(0,h.jsx)(f.A,{onClose:()=>m(!1),children:(0,h.jsx)(x,{data:R.current,onSuccess:()=>{R.current=null,m(!1),k()}})}),g&&(0,h.jsx)(c.A,{about:A("messages.confirmDeleteCategory"),onClose:()=>b(!1),onConfirm:()=>{!async function(){try{const e=await fetch(i.A.deleteCategory.url,{method:i.A.deleteCategory.method,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:F.current})});if(!(await e.json()).success)throw new Error("Something went wrong");n.oR.success(A("messages.successDeleteCategory")),k()}catch(j){console.log(j.message)}finally{b(!1),F.current=null}}()}})]})}},2748:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(8973),r=s(5649),l=s(579);const o=function(e){let{title:t,children:s,onClose:o,classes:n}=e;const i=(0,r.j)((e=>{e.target.closest(".Toastify__toast-container")||null===o||void 0===o||o()}));return(0,l.jsx)("div",{className:"fixed w-full h-full bg-slate-200 bg-opacity-35 top-0 left-0 right-0 bottom-0 flex z-10 justify-center items-center",children:(0,l.jsxs)("div",{ref:i,className:"bg-white p-4 rounded w-full max-w-2xl overflow-auto h-fit max-h-[80%] ".concat(n||""),children:[(0,l.jsx)("h2",{className:"font-bold text-lg",children:t}),(0,l.jsx)("div",{className:"w-fit ml-auto mb-2 text-2xl hover:text-red-600 cursor-pointer",onClick:()=>null===o||void 0===o?void 0:o(),children:(0,l.jsx)(a.PXF,{})}),s]})})}},4120:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(579);const r=function(e){let{buttonTitle:t,title:s,hanldeClick:r}=e;return(0,a.jsxs)("div",{className:"bg-white py-2 px-4 flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"font-bold text-lg",children:s}),(0,a.jsx)("button",{className:"border-2 bg-primary-700 text-white transition-all py-1 px-3 rounded-full ",onClick:()=>null===r||void 0===r?void 0:r(),children:t})]})}},132:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(7950),r=s(4117),l=s(8973),o=s(5649),n=s(7620),i=s(579);const c=function(e){let{about:t,onConfirm:s,onClose:c,moreDetails:d=!0,children:u}=e;const{t:m}=(0,r.Bd)(),g=(0,o.j)((()=>{null===c||void 0===c||c()}));return(0,a.createPortal)((0,i.jsx)("div",{className:"fixed inset-0 flex justify-center items-center z-50 backdrop-brightness-75",children:(0,i.jsxs)("div",{className:"bg-white shadow-lg rounded max-w-5xl mx-auto p-4 overflow-auto",ref:g,children:[(0,i.jsx)("div",{className:"w-fit ml-auto text-2xl hover:text-red-600 cursor-pointer",onClick:()=>null===c||void 0===c?void 0:c(),children:(0,i.jsx)(l.PXF,{})}),(0,i.jsxs)("div",{className:"flex justify-center gap-5 flex-col p-4 max-w-[80dvh] max-h-[80dvh] object-cover",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"".concat(m("messages.confirmQuestion1")," ").concat(t," ").concat(d?m("messages.confirmQuestion2"):"")}),u||null,(0,i.jsxs)("div",{className:"flex items-center justify-between p-1",children:[(0,i.jsx)(n.A,{title:m("messages.yes"),type:"danger",handleClick:()=>null===s||void 0===s?void 0:s(),classes:"w-[49%] font-semibold text-lg"}),(0,i.jsx)(n.A,{title:m("messages.no"),handleClick:()=>null===c||void 0===c?void 0:c(),classes:"w-[49%] font-semibold text-lg"})]})]})]})}),document.body)}},6633:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(4117),r=s(579);const l=function(){const{t:e}=(0,a.Bd)();return(0,r.jsx)("p",{className:"w-[80%] mx-auto my-2 rounded-lg p-4 text-xl bg-[var(--primary-color-200)] text-[var(--primary-color-1100)]",children:e("messages.warnNoData")})}},4075:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(4117),r=s(3156),l=s(579);const o=function(e){let{refetchFunction:t,disable:s}=e;const{t:o}=(0,a.Bd)();return(0,l.jsxs)("div",{className:"bg-red-200 rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-bl mb-3 flex items-center flex-wrap gap-4",children:[(0,l.jsx)("p",{className:"text-2xl text-red-500 ",children:o("messages.genericErr.title")}),(0,l.jsx)(r.Ddf,{className:"text-4xl text-red-500"})]}),t?(0,l.jsx)("p",{className:"text-red-500 underline transition-colors cursor-pointer hover:text-red-800 ".concat(s?"pointer-events-none cursor-not-allowed":""),onClick:()=>null===t||void 0===t?void 0:t(),children:o("messages.genericErr.btnTitle")}):null]})}},7620:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(579);const r=function(e){let{type:t="primary",title:s,dis:r,classes:l,handleClick:o}=e,n="";if("danger"===t)n="bg-red-500 hover:bg-red-600";else n="bg-[var(--primary-color-900)] hover:bg-[var(--primary-color-1100)]";return(0,a.jsx)("button",{className:"text-slate-50 border-none outline-none rounded-lg p-2 transition-colors disabled:cursor-not-allowed ".concat(n," ").concat(l),onClick:e=>null===o||void 0===o?void 0:o(e),disabled:r,children:s})}},1839:(e,t,s)=>{s.d(t,{KN:()=>l,WR:()=>o,yI:()=>r});var a=s(3401);function r(e,t){return!(!/^[a-zA-Z\d\s.,'";]+$/.test(e)&""!==e)||(a.oR.warn(t("messages.errOnlyEnglish")),!1)}function l(e,t){return!(!/^[\u0600-\u06FF\s\d\u060c.,'";]+$/.test(e)&""!==e)||(a.oR.warn(t("messages.errOnlyArabic")),!1)}function o(e,t){return!(!/^[A-Za-z\xc0-\xff\s\d'.,'";]+$/.test(e)&""!==e)||(a.oR.warn(t("messages.errOnlyFrench")),!1)}}}]);
//# sourceMappingURL=367.56f232e5.chunk.js.map