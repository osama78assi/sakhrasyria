"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[318],{6472:(e,s,l)=>{l.d(s,{A:()=>r});var a=l(5043),t=l(579);const r=function(e){let{type:s,name:l,id:r,label:n,defaultValue:d,classes:o="",placeholder:i,required:c=!1,sterilizer:m,disabled:u}=e;const[h,x]=(0,a.useState)(d||"");function b(e){if(m){(null===m||void 0===m?void 0:m(e.target.value))&&x(e.target.value)}else x(e.target.value)}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("label",{htmlFor:r,children:n}),"textarea"!==s?(0,t.jsx)("input",{disabled:u,type:s,id:r,placeholder:i,name:l,value:h,onChange:b,className:o,required:c}):(0,t.jsx)("textarea",{disabled:u,id:r,placeholder:i,name:l,value:h,onChange:b,className:o,required:c})]})}},318:(e,s,l)=>{l.r(s),l.d(s,{default:()=>g});var a=l(6178),t=l.n(a),r=l(5043),n=l(4117),d=l(6720),o=l(2780),i=l(3401),c=l(1552),m=l(6794),u=l(6472),h=l(579);const x=function(e){let{onSucess:s}=e;const[l,a]=(0,r.useState)(!1),{t:t}=(0,n.Bd)(),[d,o]=(0,r.useState)(m.A.GENERAL);return(0,h.jsxs)("form",{className:"pt-6 flex flex-col gap-2",onSubmit:async function(e){e.preventDefault(),a(!0);try{const l=new FormData(e.target);l.append("profilePic",""),l.entries().forEach((e=>{"name"!==e[0]&&"email"!==e[0]&&"password"!==e[0]||(l.delete(e[0]),l.append(e[0],e[1].trim()))}));const a=await fetch(c.A.signUP.url,{method:c.A.signUP.method,body:l}),r=await a.json();r.success&&(i.oR.success(t("messages.successCreateUser")),s()),r.error&&i.oR.error(r.message)}catch(l){console.log(l.message),a(!1)}},children:[(0,h.jsx)(u.A,{id:"name",placeholder:t("forms.admin.nameField.placeholder"),name:"name",type:"text",classes:"p-2 bg-slate-100 border rounded disabled:cursor-not-allowed",required:!0,label:t("forms.admin.nameField.label"),sterilizer:e=>/\W+/.test(e)?(i.oR.warn(t("messages.errSpecialNameChars")),!1):!(e.length>=150)||(i.oR.warn(t("messages.errUsernameLong")),!1)}),(0,h.jsx)(u.A,{id:"email",placeholder:t("forms.admin.emailField.placeholder"),name:"email",type:"email",classes:"p-2 bg-slate-100 border rounded disabled:cursor-not-allowed",required:!0,disabled:l,label:t("forms.admin.emailField.label")}),(0,h.jsx)(u.A,{id:"password",placeholder:t("forms.admin.passwordField.placeholder"),name:"password",type:"password",classes:"p-2 bg-slate-100 border rounded disabled:cursor-not-allowed",required:!0,disabled:l,label:t("forms.admin.passwordField.label")}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{children:t("forms.admin.selectRoleField.label")}),(0,h.jsx)("div",{className:"bg-slate-100 p-2 flex",children:(0,h.jsxs)("select",{disabled:l,name:"role",value:d,onChange:e=>{const{name:s,value:l}=e.target;o((e=>({...e,[s]:l})))},required:!0,className:"w-full h-full outline-none bg-transparent disabled:cursor-not-allowed",children:[(0,h.jsx)("option",{value:m.A.ADMIN,children:m.A.ADMIN}),(0,h.jsx)("option",{value:m.A.GENERAL,children:m.A.GENERAL})]})})]}),(0,h.jsx)("button",{disabled:l,className:"bg-primary-900 hover:bg-primary-700 text-white px-6 py-2 w-full max-w-[150px] rounded-full hover:scale-110 transition-all mx-auto block mt-6 disabled:cursor-not-allowed",children:t("forms.admin.addUserBtn")})]})};var b=l(2748);const p=e=>{let{name:s,email:l,role:a,userId:t,onClose:d,callFunc:o}=e;const{t:u}=(0,n.Bd)(),[x,p]=(0,r.useState)(a),[f,j]=(0,r.useState)(!1);return(0,h.jsxs)(b.A,{onClose:d,classes:"h-fit my-auto",children:[(0,h.jsx)("h1",{className:"pb-4 text-lg font-medium",children:u("forms.admin.roleTitle")}),(0,h.jsx)("p",{children:u("forms.admin.nameLabel")+s}),(0,h.jsx)("p",{children:u("forms.admin.emailLabel")+l}),(0,h.jsxs)("div",{className:"flex items-center justify-between my-4",children:[(0,h.jsx)("p",{children:u("forms.admin.roleLabel")}),(0,h.jsx)("select",{className:"border px-4 py-1",value:x,onChange:e=>{p(e.target.value)},children:Object.values(m.A).map((e=>(0,h.jsx)("option",{value:e,children:e},e)))})]}),(0,h.jsx)("button",{disabled:f,className:"w-fit mx-auto block py-1 px-3 rounded-full bg-red-600 text-white hover:bg-red-700",onClick:async()=>{try{j(!0);const e=await fetch(c.A.updateUser.url,{method:c.A.updateUser.method,credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({userId:t,role:x})});(await e.json()).success?(i.oR.success(u("messages.successChangeRole")),d(),o()):i.oR.error(u("messages.errChangeRole"))}catch(e){console.log(e.message),j(!1)}},children:u("forms.admin.editRoleBtn")})]})};var f=l(4120),j=l(4075);const g=function(){const{t:e}=(0,n.Bd)(),[s,l]=(0,r.useState)(!0),[a,m]=(0,r.useState)(!1),[u,g]=(0,r.useState)([]),[v,w]=(0,r.useState)(!1),[N,y]=(0,r.useState)({email:"",name:"",role:"",_id:""}),[A,C]=(0,r.useState)(!1);async function S(){try{m(!1),l(!0);const e=await fetch(c.A.allUser.url,{method:c.A.allUser.method,credentials:"include"}),s=await e.json();s.success&&g(s.data),s.error&&i.oR.error(s.message)}catch(a){m(!0),console.log(a.message)}finally{l(!1)}}return(0,r.useEffect)((()=>{S()}),[]),s?(0,h.jsx)("div",{className:"bg-white pb-4",children:(0,h.jsx)("div",{className:"flex items-center justify-center",children:(0,h.jsx)(o.IN,{strokeColor:"#c89329"})})}):a?(0,h.jsx)("div",{className:"p-4 w-full h-full",children:(0,h.jsx)(j.A,{refetchFunction:S,disable:s})}):(0,h.jsxs)("div",{className:"bg-white pb-4",children:[(0,h.jsx)(f.A,{title:e("forms.admin.uploadBtnUserTitle"),buttonTitle:e("forms.admin.uploadBtnUserOpen"),hanldeClick:()=>C(!0)}),(0,h.jsxs)("table",{className:"w-full userTable",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{className:"bg-primary-700 text-white",children:[(0,h.jsx)("th",{children:e("tables.common.count")}),(0,h.jsx)("th",{children:e("tables.allUsers.name")}),(0,h.jsx)("th",{children:e("tables.allUsers.email")}),(0,h.jsx)("th",{children:e("tables.allUsers.role")}),(0,h.jsx)("th",{children:e("tables.allUsers.createdAt")}),(0,h.jsx)("th",{children:e("tables.common.action")})]})}),(0,h.jsx)("tbody",{children:u.map(((e,s)=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:s+1}),(0,h.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),(0,h.jsx)("td",{children:null===e||void 0===e?void 0:e.email}),(0,h.jsx)("td",{children:null===e||void 0===e?void 0:e.role}),(0,h.jsx)("td",{children:t()(null===e||void 0===e?void 0:e.createdAt).format("LL")}),(0,h.jsx)("td",{className:"py-2",children:(0,h.jsx)("button",{className:"bg-green-100 p-2 rounded-full cursor-pointer hover:bg-green-500 hover:text-white",onClick:()=>{y(e),w(!0)},children:(0,h.jsx)(d.vAr,{})})})]},null===e||void 0===e?void 0:e._id)))})]}),v&&(0,h.jsx)(p,{onClose:()=>w(!1),name:N.name,email:N.email,role:N.role,userId:N._id,callFunc:S}),A&&(0,h.jsx)(b.A,{onClose:()=>C(!1),children:(0,h.jsx)(x,{onSucess:()=>{S(),C(!1)}})})]})}},2748:(e,s,l)=>{l.d(s,{A:()=>n});var a=l(8973),t=l(5649),r=l(579);const n=function(e){let{title:s,children:l,onClose:n,classes:d}=e;const o=(0,t.j)((e=>{e.target.closest(".Toastify__toast-container")||null===n||void 0===n||n()}));return(0,r.jsx)("div",{className:"fixed w-full h-full bg-slate-200 bg-opacity-35 top-0 left-0 right-0 bottom-0 flex z-10 justify-center items-center",children:(0,r.jsxs)("div",{ref:o,className:"bg-white p-4 rounded w-full max-w-2xl overflow-auto h-fit max-h-[80%] ".concat(d||""),children:[(0,r.jsx)("h2",{className:"font-bold text-lg",children:s}),(0,r.jsx)("div",{className:"w-fit ml-auto mb-2 text-2xl hover:text-red-600 cursor-pointer",onClick:()=>null===n||void 0===n?void 0:n(),children:(0,r.jsx)(a.PXF,{})}),l]})})}},4120:(e,s,l)=>{l.d(s,{A:()=>t});var a=l(579);const t=function(e){let{buttonTitle:s,title:l,hanldeClick:t}=e;return(0,a.jsxs)("div",{className:"bg-white py-2 px-4 flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"font-bold text-lg",children:l}),(0,a.jsx)("button",{className:"border-2 bg-primary-700 text-white transition-all py-1 px-3 rounded-full ",onClick:()=>null===t||void 0===t?void 0:t(),children:s})]})}},4075:(e,s,l)=>{l.d(s,{A:()=>n});var a=l(4117),t=l(3156),r=l(579);const n=function(e){let{refetchFunction:s,disable:l}=e;const{t:n}=(0,a.Bd)();return(0,r.jsxs)("div",{className:"bg-red-200 rounded-lg p-3",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-bl mb-3 flex items-center flex-wrap gap-4",children:[(0,r.jsx)("p",{className:"text-2xl text-red-500 ",children:n("messages.genericErr.title")}),(0,r.jsx)(t.Ddf,{className:"text-4xl text-red-500"})]}),s?(0,r.jsx)("p",{className:"text-red-500 underline transition-colors cursor-pointer hover:text-red-800 ".concat(l?"pointer-events-none cursor-not-allowed":""),onClick:()=>null===s||void 0===s?void 0:s(),children:n("messages.genericErr.btnTitle")}):null]})}}}]);
//# sourceMappingURL=318.04d60e5a.chunk.js.map