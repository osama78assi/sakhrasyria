"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[334],{3648:(e,s,t)=>{t.d(s,{A:()=>u});var r=t(5043),a=t(4117),n=t(3156),l=t(3003),o=t(3216),i=t(6879);var c=t(5414),d=t(132),g=t(579);const m=function(e){let{name:s,imgUrl:t}=e;const[a,n]=(0,r.useState)(!1);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("img",{onLoad:()=>n(!0),src:t,alt:"".concat(s," product"),className:"w-full h-56 object-cover ".concat(a?"":"hidden")}),(0,g.jsx)("div",{className:"w-full h-56 bg-gray-500 animate-pulse ".concat(a?"hidden":"")})]})};const u=function(e){var s,t;let{id:u,images:x,name:h,price:p,classes:b}=e;const[f,j]=(0,r.useState)(!1),v=(0,l.d4)((e=>e.user.user)),y=(0,l.d4)((e=>e.cart.cart)),w=(0,l.d4)((e=>e.cart.isLoading)),[N,C]=(0,r.useState)(0),{i18n:A}=(0,a.Bd)(),k=(0,o.Zp)(),{t:F}=(0,a.Bd)(),P=(0,l.wA)(),S=null===y||void 0===y?void 0:y.filter((e=>e.productId._id===u)).length;function B(){C((e=>(e+1)%x.length))}function D(){C((e=>(e-1+x.length)%x.length))}return(0,g.jsxs)("div",{className:"w-[20rem] basis-[20rem] sm:w-auto sm:basis-[calc(50%-1rem)] md:basis-[calc(33.333333333% - 1.75rem)] lg:basis-[calc(25%-1rem)] border-[1px] border-[var(--primary-color-900)] bg-white shadow-lg rounded-lg overflow-hidden hover:shadow-lg transition-shadow duration-300 ".concat(b||""),children:[(0,g.jsx)("div",{className:"relative",children:(0,g.jsx)(m,{imgUrl:x[N],name:null===h||void 0===h||null===(s=h.filter((e=>e.language===A.language))[0])||void 0===s?void 0:s.text})}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("button",{onClick:()=>"en"===A.language?D():B(),className:"bg-primary-900 text-white p-2 hover:bg-primary-700 ",children:"ar"===A.language?(0,g.jsx)(n.FDZ,{}):(0,g.jsx)(n.ed2,{})}),(0,g.jsxs)("span",{children:[N+1," / ",x.length]}),(0,g.jsx)("button",{onClick:()=>"en"===A.language?B():D(),className:" bg-primary-900 text-white p-2 hover:bg-primary-700",children:"ar"===A.language?(0,g.jsx)(n.ed2,{}):(0,g.jsx)(n.FDZ,{})})]}),(0,g.jsxs)("div",{className:"p-4",children:[(0,g.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:null===h||void 0===h||null===(t=h.filter((e=>e.language===A.language))[0])||void 0===t?void 0:t.text}),(0,g.jsx)("div",{className:"flex items-center justify-between mt-2",children:(0,g.jsx)("span",{className:"text-xl font-bold",children:(0,i.A)(p)})}),(0,g.jsxs)("div",{className:"flex gap-[1.5rem]",children:[(0,g.jsx)("button",{onClick:async function(e){try{if(null===e||void 0===e||e.stopPropagation(),null===e||void 0===e||e.preventDefault(),!v)return void k("/login/");if(S)return void j(!0);P((0,c.bE)(u))}catch(s){console.log(s.message)}},className:"mt-4 w-full bg-primary-900 text-white py-2 px-4 basis-[calc(50%-0.75rem)] rounded-lg hover:bg-primary-700 transition-colors ".concat(w&&"!cursor-not-allowed"),disabled:w,children:F(S?"cart.removeFromBtn":"cart.addToBtn")}),(0,g.jsx)("button",{onClick:function(){k("/product/".concat(u))},className:"mt-4 w-full bg-primary-900 text-white py-2 px-4 basis-[calc(50%-0.75rem)] rounded-lg hover:bg-primary-700 transition-colors ".concat(w&&"!cursor-not-allowed"),disabled:w,children:F("store.showDetailsBtn")})]})]})]}),f&&(0,g.jsx)(d.A,{about:F("messages.confirmRemoveFromCart"),onClose:()=>j(!1),onConfirm:()=>{!function(e){P((0,c.n4)(e))}(u),j(!1)}})]})}},85:(e,s,t)=>{t.d(s,{A:()=>a});var r=t(579);const a=function(){return(0,r.jsxs)("div",{className:"w-[20rem] basis-[20rem] sm:w-auto sm:basis-[calc(50%-1rem)] md:basis-[calc(33.333333333% - 1rem)] lg:basis-[calc(25%-1rem)] bg-white shadow-md rounded-lg overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[(0,r.jsx)("div",{className:"relative h-56 bg-gray-500 animate-pulse"}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold bg-gray-500 animate-pulse h-10"}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,r.jsx)("span",{className:"font-bold bg-gray-500 animate-pulse h-5 w-[48%]"}),(0,r.jsx)("span",{className:"bg-gray-500 animate-pulse h-5 w-[48%]"})]}),(0,r.jsxs)("div",{className:"flex gap-[1.5rem]",children:[(0,r.jsx)("button",{className:"mt-4 h-10 w-full bg-gray-500 animate-pulse py-2 px-4 basis-[calc(50%-0.75rem)] rounded-lg transition-colors cursor-default"}),(0,r.jsx)("button",{className:"mt-4 h-10 w-full bg-gray-500 animate-pulse py-2 px-4 basis-[calc(50%-0.75rem)] rounded-lg transition-colors cursor-default"})]})]})})]})}},132:(e,s,t)=>{t.d(s,{A:()=>c});var r=t(7950),a=t(4117),n=t(8973),l=t(5649),o=t(7620),i=t(579);const c=function(e){let{about:s,onConfirm:t,onClose:c,moreDetails:d=!0,children:g}=e;const{t:m}=(0,a.Bd)(),u=(0,l.j)((()=>{null===c||void 0===c||c()}));return(0,r.createPortal)((0,i.jsx)("div",{className:"fixed inset-0 flex justify-center items-center z-50 backdrop-brightness-75",children:(0,i.jsxs)("div",{className:"bg-white shadow-lg rounded max-w-5xl mx-auto p-4 overflow-auto",ref:u,children:[(0,i.jsx)("div",{className:"w-fit ml-auto text-2xl hover:text-red-600 cursor-pointer",onClick:()=>null===c||void 0===c?void 0:c(),children:(0,i.jsx)(n.PXF,{})}),(0,i.jsxs)("div",{className:"flex justify-center gap-5 flex-col p-4 max-w-[80dvh] max-h-[80dvh] object-cover",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"".concat(m("messages.confirmQuestion1")," ").concat(s," ").concat(d?m("messages.confirmQuestion2"):"")}),g||null,(0,i.jsxs)("div",{className:"flex items-center justify-between p-1",children:[(0,i.jsx)(o.A,{title:m("messages.yes"),type:"danger",handleClick:()=>null===t||void 0===t?void 0:t(),classes:"w-[49%] font-semibold text-lg"}),(0,i.jsx)(o.A,{title:m("messages.no"),handleClick:()=>null===c||void 0===c?void 0:c(),classes:"w-[49%] font-semibold text-lg"})]})]})]})}),document.body)}},4075:(e,s,t)=>{t.d(s,{A:()=>l});var r=t(4117),a=t(3156),n=t(579);const l=function(e){let{refetchFunction:s,disable:t}=e;const{t:l}=(0,r.Bd)();return(0,n.jsxs)("div",{className:"bg-red-200 rounded-lg p-3",children:[(0,n.jsxs)("div",{className:"bg-gradient-to-bl mb-3 flex items-center flex-wrap gap-4",children:[(0,n.jsx)("p",{className:"text-2xl text-red-500 ",children:l("messages.genericErr.title")}),(0,n.jsx)(a.Ddf,{className:"text-4xl text-red-500"})]}),s?(0,n.jsx)("p",{className:"text-red-500 underline transition-colors cursor-pointer hover:text-red-800 ".concat(t?"pointer-events-none cursor-not-allowed":""),onClick:()=>null===s||void 0===s?void 0:s(),children:l("messages.genericErr.btnTitle")}):null]})}},4922:(e,s,t)=>{t.d(s,{A:()=>l});var r=t(4117),a=t(3156),n=t(579);const l=function(e){let{pagesCount:s,setNextPage:t,setPrevPage:l,setCustomPage:o,page:i}=e;const{t:c,i18n:d}=(0,r.Bd)();return(0,n.jsxs)("div",{className:"flex px-3 flex-col justify-center items-center mx-auto max-w-[535px] flex-wrap gap-2 py-2 s550:flex-row s550:justify-between",children:[null===s?(0,n.jsx)("div",{className:"flex items-center rounded-lg bg-gray-400 h-10 w-[8rem] animate-pulse text-white p-2"}):0===s?null:(0,n.jsxs)("button",{onClick:()=>l(),className:"flex items-center rounded-lg bg-primary-900 text-white p-2 hover:bg-primary-700",children:["ar"===d.language?(0,n.jsx)(a.FDZ,{}):(0,n.jsx)(a.ed2,{}),(0,n.jsx)("span",{children:c("store.prev")})]}),(0,n.jsx)("div",{className:"flex justify-between gap-2",children:null===s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"bg-gray-400 animate-pulse text-white p-2 border-gray-400 rounded-lg border-2 cursor-pointer h-10 w-10"}),(0,n.jsx)("span",{className:"bg-gray-400 animate-pulse text-white p-2 border-gray-400 rounded-lg border-2 cursor-pointer h-10 w-10"}),(0,n.jsx)("span",{className:"bg-gray-400 animate-pulse text-white p-2 border-gray-400 rounded-lg border-2 cursor-pointer h-10 w-10"})]}):0===s?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"bg-primary-900 text-white p-2 border-gray-400 rounded-lg border-2 cursor-pointer",onClick:()=>o(1),children:1}),s>2&&(0,n.jsx)("span",{className:"bg-primary-900 text-white p-2 border-gray-400 rounded-lg border-2 cursor-pointer",onClick:()=>o(2),children:2}),s>3&&(0,n.jsx)("span",{className:"bg-primary-900 text-white p-2 border-gray-400 rounded-lg border-2 cursor-pointer",onClick:()=>o(3),children:3}),s>4&&(0,n.jsx)("span",{children:"..."}),s-2>4&&(0,n.jsx)("span",{className:"bg-primary-900 text-white p-2 border-gray-400 rounded-lg border-2 cursor-pointer",onClick:()=>o(s-2),children:s-2}),s-1>5&&(0,n.jsx)("span",{className:"bg-primary-900 text-white p-2 border-gray-400 rounded-lg border-2 cursor-pointer",onClick:()=>o(s-1),children:s-1}),s>=4&&(0,n.jsx)("span",{className:"bg-primary-900 text-white p-2 border-gray-400 rounded-lg border-2 cursor-pointer",onClick:()=>o(s),children:s})]})}),null===s?(0,n.jsx)("div",{className:"flex items-center rounded-lg bg-gray-400 h-10 w-[8rem] animate-pulse text-white p-2"}):0===s?null:(0,n.jsxs)("button",{onClick:()=>t(),className:"flex items-center rounded-lg bg-primary-900 text-white p-2 hover:bg-primary-700",children:[(0,n.jsx)("span",{children:c("store.next")}),"ar"===d.language?(0,n.jsx)(a.ed2,{}):(0,n.jsx)(a.FDZ,{})]})]})}},7620:(e,s,t)=>{t.d(s,{A:()=>a});var r=t(579);const a=function(e){let{type:s="primary",title:t,dis:a,classes:n,handleClick:l}=e,o="";if("danger"===s)o="bg-red-500 hover:bg-red-600";else o="bg-[var(--primary-color-900)] hover:bg-[var(--primary-color-1100)]";return(0,r.jsx)("button",{className:"text-slate-50 border-none outline-none rounded-lg p-2 transition-colors disabled:cursor-not-allowed ".concat(o," ").concat(n),onClick:e=>null===l||void 0===l?void 0:l(e),disabled:a,children:t})}},6879:(e,s,t)=>{t.d(s,{A:()=>r});const r=e=>new Intl.NumberFormat("en-SY",{style:"currency",currency:"SYP",minimumFractionDigits:2}).format(e)},3334:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var r=t(5043),a=t(1591),n=t(4117),l=t(3003),o=t(5475),i=t(3401),c=t(1552),d=t(3648),g=t(85),m=t(4075),u=t(4922),x=t(5414),h=t(579);const p=function(){const{t:e,i18n:s}=(0,n.Bd)(),[t,p]=(0,r.useState)(!0),[b,f]=(0,r.useState)([]),[j,v]=(0,r.useState)(!1),[y,w]=(0,o.ok)(),N=null!==y.get("page")?+y.get("page"):1,C=null!==y.get("filterBy")?y.get("filterBy"):"",[A,k]=(0,r.useState)(!0),[F,P]=(0,r.useState)(null),[S,B]=(0,r.useState)([]),D=(0,l.wA)(),E=(0,r.useCallback)((async function(){try{v(!1),k(!0);const s=await fetch(c.A.getAllProducts.url,{method:c.A.getAllProducts.method,headers:{"Content-Type":"application/json"},body:JSON.stringify({page:N,category:C})}),t=await s.json(),{success:r}=t;if(!r)throw i.oR.error(e("messages.errGetProducts")),new Error("Something went wrong");{const{totalPages:e,products:s}=t.data;B(s),P(e)}}catch(j){console.log(j.message),v(!0)}finally{k(!1)}}),[N,C]);async function _(){try{v(!1),p(!0);const s=await fetch(c.A.getAllCategories.url,{method:c.A.getAllCategories.method}),{data:t,error:r,message:a}=await s.json();if(r)throw i.oR.error(e("messages.errGetCategories")),console.log(a),new Error("Something went wrong");f(t),C&&!t.filter((e=>e._id===C)).length&&(i.oR.error(e("messages.errCategoryNotFound")),y.delete("filterBy"),w(y))}catch(j){v(!0),console.log(j.message)}finally{p(!1)}}return(0,r.useEffect)((()=>{_()}),[]),(0,r.useEffect)((()=>{E()}),[C,N,E]),(0,r.useEffect)((()=>{D((0,x.RW)())}),[]),j?(0,h.jsx)(m.A,{disable:t||A,refetchFunction:()=>{_(),E()}}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(a.m,{children:[(0,h.jsx)("meta",{charSet:"utf-8"}),(0,h.jsx)("title",{children:e("SEO.titles.store")})]}),(0,h.jsx)("div",{className:"container w-[90%] mx-auto space-y-3",children:(0,h.jsxs)("div",{className:"bg-white mx-auto items-center pt-2",children:[(0,h.jsxs)("div",{className:"flex py-4 px-2 gap-4 items-center",children:[(0,h.jsx)("h2",{className:"text-xl",children:e("store.filterCategoryTitle")}),t?(0,h.jsx)("div",{className:"bg-gray-500 animate-pulse h-10 w-40 rounded-lg"}):(0,h.jsxs)("select",{onChange:e=>function(e){if(""===e)return y.delete("filterBy"),void w(y);y.set("filterBy",e),w(y)}(e.target.value),className:"p-2 border-2 h-10 border-[var(--primary-color-900)] rounded-lg focus-within:focus:focus-visible:outline-none",children:[(0,h.jsx)("option",{value:"",children:e("store.categorySelect")}),b.length?b.map((e=>(0,h.jsx)("option",{value:e._id,selected:e._id===C,children:e.categoryName.filter((e=>e.language===s.language))[0].text},e._id))):null]})]}),(0,h.jsx)("div",{className:"store-container container mx-auto py-8 gap-[1rem] md:gap flex flex-wrap px-3",style:{rowGap:"1.5rem"},children:A?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(g.A,{}),(0,h.jsx)(g.A,{}),(0,h.jsx)(g.A,{}),(0,h.jsx)(g.A,{}),(0,h.jsx)(g.A,{}),(0,h.jsx)(g.A,{}),(0,h.jsx)(g.A,{}),(0,h.jsx)(g.A,{}),(0,h.jsx)(g.A,{}),(0,h.jsx)(g.A,{})]}):A||S.length?S.map((e=>(0,h.jsx)(d.A,{id:e._id,images:e.productImage,name:e.name,price:e.price},e._id))):(0,h.jsx)("p",{className:"bg-slate-300 text-gray-800 p-3 text-xl rounded-lg mx-auto",children:e("messages.warnNoProducts")})}),(0,h.jsx)(u.A,{page:N,pagesCount:F,setNextPage:function(){N!==F&&(y.set("page",N+1),w(y))},setPrevPage:function(){1!==N&&(y.set("page",N-1),w(y))},setCustomPage:function(e){y.set("page",e),w(y)}})]})})]})}}}]);
//# sourceMappingURL=334.491b6d2e.chunk.js.map